В папке captchas находятся json файлы вида: ответ_uid.json, в котором одно поле "captcha_uid" (по этому uid клиент получает изображения капчи). В папке captchas находятся json файлы капчи, в этой же папке есть папки numbers, ask, image: в них находятся png файлы чисел вопроса и самой капчи.

В папке src_image находятся переходные svg и png файлы, которые используются во время генерации капчи. В этой же папке src есть папки numbers_bg, ask_bg и captcha_bg: в них находятся фоны для изображений

Как проходит проходит процесс прохождения капчи:
1) Клиент запрашивает от сервера капчу
2) Nginx проксирует на локальное Lua приложение, добавляя в uri ip клиента
3) Сервер сначала проверяет не бане ли ip
4) Далее клиенту отправляются данные случайного json (без имени)
5) Клиент получает json с полем captcha_uid и по соответствующим роутам получает картинку вопроса, капчи и чисел с помощью uid
6) Клиент вводит значение и отправляет на валидацию Lua приложению (json с полями captcha_uid и answer) там мы ищем в соответствующих папка файл в названии которого есть uid. Просим название файла и сравниваем ответ капчи с ответом клиента
7) Файл expire_captcha_collection.py — сборщик истекший капчи. По истечению 90 сек капча удаляет с сервера и больше не действительна

В системе реализована двухуровневая верификация для каждого DOM-элемента, имеющего атрибут id. Первый уровень проверки осуществляется по наличию элемента в документе с использованием метода document.querySelector(), который осуществляет поиск элемента по его идентификатору. Второй уровень проверки направлен на гарантию уникальности элемента, чтобы предотвратить возможность его дублирования или создания аналогичного элемента с тем же идентификатором, что могло бы использоваться для обхода системных ограничений. Для этого используется сравнение элемента, полученного через React-хук useRef, с элементом, найденным через querySelector, с помощью метода isEqualNode.

Система автоматически инициирует процесс проверки каждые 2 секунды, чтобы обеспечить постоянный мониторинг состояния элементов. В случае обнаружения несоответствия условиям верификации, интерфейс пользователя немедленно блокируется, инициируя процесс рикроллинга, что является частью мер по предотвращению нежелательных действий. Кроме того, на сервер отправляется запрос, целью которого является исключение возможности дальнейшего получения пользователем капчи, заменяя её на рикролл. Эти меры предпринимаются для усиления безопасности системы и предотвращения потенциального злоупотребления.

# ЗАПУСК КАПЧИ
Для запуска капчи, необходимо:
1) docker compose up -d --build
2) Настроить nginx: блок location для приложения находится в папке nginx